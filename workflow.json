{
  "name": "My workflow",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "weeks",
              "triggerAtHour": 10
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.3,
      "position": [
        0,
        0
      ],
      "id": "f1faaf87-780c-4634-b1ba-1bc52dd8f2c5",
      "name": "Schedule Trigger"
    },
    {
      "parameters": {
        "jsCode": "const dates = [];\nconst today = new Date();\n\nfor (let i = 1; i <= 7; i++) {\n  const date = new Date(today);\n  date.setDate(today.getDate() + i);\n  dates.push(date.toISOString().split('T')[0]);\n}\n\nreturn [\n  {\n    json: {\n      city: \"Samara\",\n      dates: dates  // <-- –º–∞—Å—Å–∏–≤\n    }\n  }\n];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        208,
        0
      ],
      "id": "48f1061b-74b7-49e8-b3d1-e17e5b809637",
      "name": "Code in JavaScript"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://host.docker.internal:8000/predict",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "city",
              "value": "={{ $json.city }}"
            },
            {
              "name": "dates",
              "value": "={{ $json.dates }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        416,
        0
      ],
      "id": "0110adcc-bfb3-4865-bd68-5d6d0c6fc908",
      "name": "HTTP Request"
    },
    {
      "parameters": {
        "jsCode": "const city = $json.city;\nconst preds = $json.predictions;\n\nlet msg = `üëã –ü—Ä–∏–≤–µ—Ç! –í–æ—Ç –ø—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã –¥–ª—è –≥–æ—Ä–æ–¥–∞ ${city} –Ω–∞ –±–ª–∏–∂–∞–π—à—É—é –Ω–µ–¥–µ–ª—é:\\n\\n`;\n\nfor (const p of preds) {\n  msg += `üìÖ ${p.date}\\n`;\n  msg += `   üå°Ô∏è –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: ${p.temperature.toFixed(1)}¬∞C\\n`;\n  msg += `   ‚ÜïÔ∏è –î–∏–∞–ø–∞–∑–æ–Ω: –æ—Ç ${p.lower_bound.toFixed(1)}¬∞C –¥–æ ${p.upper_bound.toFixed(1)}¬∞C\\n`;\n  \n  \n  if (p.temperature > 20) {\n    msg += `   ‚òÄÔ∏è –¢–µ–ø–ª–æ, –º–æ–∂–Ω–æ –Ω–∞—Å–ª–∞–∂–¥–∞—Ç—å—Å—è –ø—Ä–æ–≥—É–ª–∫–∞–º–∏!\\n\\n`;\n  } else if (p.temperature > 5) {\n    msg += `   üß• –ü—Ä–æ—Ö–ª–∞–¥–Ω–æ, —Å–æ–≤–µ—Ç—É–µ–º –≤–∑—è—Ç—å –ª—ë–≥–∫—É—é –∫—É—Ä—Ç–∫—É.\\n\\n`;\n  } else {\n    msg += `   ‚ùÑÔ∏è –•–æ–ª–æ–¥–Ω–æ, –æ–¥–µ–≤–∞–π—Ç–µ—Å—å —Ç–µ–ø–ª–µ–µ!\\n\\n`;\n  }\n}\n\nreturn [{\n  json: {\n    message: msg,\n    chat_id: \"YOUR_TELEGRAM_CHAT_ID\",\n    disableBranding: true\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        624,
        0
      ],
      "id": "07bace01-b2cf-46a9-b59e-9fb8b83b55ec",
      "name": "Code in JavaScript1"
    },
    {
      "parameters": {
        "chatId": "710434465",
        "text": "={{$json.message}}",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        832,
        0
      ],
      "id": "482d3a5c-a2a6-4198-aadb-b38b6ca1124b",
      "name": "Send a text message",
      "webhookId": "0eeffaed-b979-4291-8a68-230ace943027",
      "credentials": {
        "telegramApi": {
          "id": "uAWkyUWl5VEURAcK",
          "name": "Telegram account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request": {
      "main": [
        [
          {
            "node": "Code in JavaScript1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript1": {
      "main": [
        [
          {
            "node": "Send a text message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "70e16ae2-dc03-480d-b30a-4562ae32f96e",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "86ede0019501cdf5cae40b7550aabb66fe1c5c8fea0c732d73926c8c3729deb1"
  },
  "id": "Za7z2xhVpObXKDPH",
  "tags": []
}